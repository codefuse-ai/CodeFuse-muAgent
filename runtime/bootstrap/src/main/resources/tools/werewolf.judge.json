{
  "id": 2,
  "gmtCreate": "2024-07-17T07:20:35.000+00:00",
  "gmtModified": "2024-07-17T07:20:35.000+00:00",
  "toolKey": "werewolf.judge",
  "toolDefinition": {"description":"演示tool的返回结果","name":"OPSGPT:MAIN_SITE:ToolSampleController.queryEditableResponse_response","parameters":{"description":"演示tool的返回结果","properties":{"button":{"description":"非必填，按钮名称，默认值为「重试」","requestType":"body","type":"string"},"pathVariable":{"description":"路径参数","requestType":"path","type":"string"},"requestParam":{"description":"请求参数","requestType":"query","type":"string"}},"required":[],"type":"object"},"result":{"description":"返回信息","properties":{},"type":"object"}},
  "toolId": null,
  "description": "狼人杀判断游戏是否结束",
  "toolName": "狼人杀判断游戏是否结束",
  "pauseStatus": "EXECUTING",
  "transparentInfo": null,
  "intention": null,
  "input": null,
  "output": null,
  "exeNormal": true,
  "message": null,
  "requestGroovy": "import com.alipay.muagent.model.connector.http.HttpParameters\nimport com.google.gson.Gson\n\nclass Content {\n    String text;\n}\n\ndef getMemory() {\n    return binding.hasVariable(\"stepMemory\") ? (String) binding.getVariable(\"stepMemory\") : \"[null]\"\n}\n\ndef convertRequest(String request) {\n    def gson = new Gson()\n    String template = \"##本局游戏历史记录##\\n{memory}\\n\\n##背景##\\n你是一个逻辑判断大师，你正在参与“狼人杀”这个游戏，你的角色是[主持人]。你熟悉“狼人杀”游戏的完整流程，现在需要判断当前游戏是否结束。\\n\\n##任务##\\n你的任务是判断当前游戏是否结束，规则如下：\\n根据【狼人杀角色分配和单词分配】感知每一个玩家属于“好人”或者属于“狼人”，根据【本局游戏历史记录】和【重要通知】感知每一轮被投票死亡、被狼人杀死、被女巫毒死的玩家。 统计目前存活的[好人]玩家数量、[狼人]玩家数量。格式{\\\"存活的好人\\\":[player_name], \\\"存活的狼人\\\":[player_name]},判断以下条件中的一个是否满足：\\n1. 存活的“狼人”玩家数量为0。\\n2. “狼人”数量大于了“好人”数量。\\n3. “狼人”数量等于“好人”数量，“女巫”已死亡或者她的毒药已经使用。\\n若某个条件满足，游戏结束；否则游戏没有结束。\\n\\n##输出##\\n返回JSON格式，格式为：{\\\"thought\\\": str, \\\"存活的玩家信息\\\": {\\\"存活的好人\\\":[player_name], \\\"存活的狼人\\\":[player_name]}, \\\"isEnd\\\": \\\"是\\\" or \\\"否\\\"}\\n-thought **根据本局游戏历史记录** 分析 游戏最开始有哪些玩家, 他们的身份是什么, 投票导致死亡的玩家有哪些? 被狼人杀死的玩家有哪些? 被女巫毒死的玩家是谁? 析当前存活的玩家有哪些? 是否触发了游戏结束条件? 等等。\\n\\n##example##\\n{\\\"thought\\\": \\\"**游戏开始时** 有 小杭、小北、小赵、小钱、小孙、小李、小夏、小张 八位玩家, 其中 小杭、小北、小赵是[狼人], 小钱、小孙，小张是[平民], 小李是[预言家]，小夏是[女巫]，小张在第一轮被狼人杀死了，[狼人]数量大于0，且[好人]数量大于[狼人]数量, 因此游戏未结束。\\\", \\\"存活的玩家信息\\\": {\\\"存活的狼人\\\":[\\\"小杭\\\", \\\"小北\\\", \\\"小赵\\\"], \\\"存活的好人\\\":[\\\"小钱\\\", \\\"小孙\\\", \\\"小李\\\", \\\"小夏\\\"]}, \\\"isEnd\\\": \\\"否\\\" }\\n\\n##example##\\n{\\\"thought\\\": \\\"**游戏开始时** 有 小杭、小北、小赵、小钱、小孙、小李、小夏、小张 八位玩家, 其中 小杭、小北、小赵是[狼人], 小钱、小孙，小张是[平民], 小李是[预言家]，小夏是[女巫]，小张在第一轮被狼人杀死了, 小夏被第一轮投票投死了，[狼人]数量等于[好人]数量额等于[狼人]数量，女巫已死亡, 因此游戏结束。\\\", \\\"存活的玩家信息\\\": {\\\"存活的狼人\\\":[\\\"小杭\\\", \\\"小北\\\", \\\"小赵\\\"], \\\"存活的好人\\\":[\\\"小钱\\\", \\\"小孙\\\", \\\"小李\\\"]}, \\\"isEnd\\\": \\\"是\\\" }\\n\\n{\\\"thought\\\": \\\"**游戏开始时** 有 小杭、小北、小赵、小钱、小孙、小李、小夏、小张 八位玩家, 其中 小杭、小北、小赵是[狼人], 小钱、小孙，小张是[平民], 小李是[预言家]，小夏是[女巫]，小张在第一轮被狼人杀死了, 女巫毒死了小孙，小钱被投票死亡了。[狼人]数量等于3，[好人]数量等于2，[狼人]数量大于[好人]数量,因此游戏结束。\\\", \\\"存活的玩家信息\\\": {\\\"存活的狼人\\\":[\\\"小杭\\\", \\\"小北\\\", \\\"小赵\\\"], \\\"存活的好人\\\":[\\\"小李\\\", \\\"小夏\\\"]}, \\\"isEnd\\\": \\\"是\\\" }\\n\\n##注意事项##\\n1. 所有玩家的座位、身份、agent_name、存活状态、游戏进展等信息在开头部分已给出。\\n2. \\\"是\\\" or \\\"否\\\" 如何选择？若游戏结束，则为\\\"是\\\"，否则为\\\"否\\\"。\\n3. 请直接输出jsonstr，不用输出markdown格式。\\n4. 游戏可能进行了不只一轮，可能有1个或者2个玩家已经死亡，请注意感知。\\n\\n##结果##\\n\"\n\n    Content content = new Content()\n    content.text = template.replace(\"{memory}\", getMemory())\n\n\n    HttpParameters parameters = HttpParameters.builder().build()\n    parameters.setRequestBody(gson.toJson(content))\n    return gson.toJson(parameters)\n}\n\nconvertRequest(request)",
  "summaryGroovy": null,
  "responseGroovy": "import com.google.gson.Gson\n\nclass LLMResponse {\n\n    int successCode;\n\n    String errorMessage;\n\n    String answer;\n}\n\ndef convertResponse(String response) {\n    def gson = new Gson()\n    LLMResponse lr = gson.fromJson(response, LLMResponse.class)\n\n    if (lr.getSuccessCode() == 1) {\n        return lr.getAnswer()\n    }\n\n    throw new RuntimeException(lr.getErrorMessage())\n}\n\nconvertResponse(response)",
  "manifestSchema": {"api":{"type":"http"},"auth":{"type":"none"},"description_for_human":"演示tool的返回结果","description_for_model":"演示tool的返回结果","headers":{},"name_for_human":"ToolSampleController.queryEditableResponse_response","schema_version":"v1"},
  "toolApiPath": "OPSGPT./.POST",
  "toolProtocol": "HTTP",
  "serverUrl": null,
  "apiSchema": {"info":{"description":"演示tool的返回结果","title":"ToolSampleController.queryEditableResponse_response","version":"0.0.1"},"openapi":"3.0.0","paths":{"http":{"method":"POST","parameters":[{"in":"body","schema":{"$ref":"#ToolSampleController-queryEditableResponse-request-0"}},{"in":"query","schema":{"$ref":"#ToolSampleController-queryEditableResponse-request-1"}},{"in":"path","schema":{"$ref":"#ToolSampleController-queryEditableResponse-request-2"}}],"path":"/api/tool/sample/{pathVariable}","responses":{"200":{"application/json":{"$ref":"#/definitions/BaseResult_ToolResponse_"}}}}},"servers":[{"url":"http://ekgservice:3737/llm/generate"}]},
  "operatorCreate": "169704",
  "operatorModified": "169704",
  "version": "3",
  "owner": "169704",
  "deleted": null,
  "type": "OPEN",
  "status": "PROD_PUBLISHED",
  "vdbPk": "447890596018669520",
  "selectSamples": "[null]",
  "selectVars": "[{}]",
  "invokeType": "SYNC",
  "tag": "SINGLE_TOOL:OPSGPT:MAIN_SITE:ToolSampleController.queryEditableResponse_response",
  "toolExtraInfo": {
    "errMessage": null,
    "devVdbPk": "447890596018692596",
    "prodVdbPk": null,
    "summaryModel": null,
    "stepConfigList": null,
    "nexExtraInfo": null,
    "ispInfo": null,
    "rpcUniqueId": null
  },
  "pauseStatusList": null,
  "configMap": null
}